<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SummerSlam 2025 Picks</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 700px;
      margin: auto;
      padding: 20px;
      background-image: url('Screenshot_20-removebg-preview.png');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      color: #fff;
      backdrop-filter: blur(4px);
    }
    h1, h2 {
      text-align: center;
      color: #fff;
    }
    label, select, input[type="text"] {
      display: block;
      margin: 15px 0 5px;
      width: 100%;
    }
    input, select {
      padding: 8px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }
    button {
      margin-top: 20px;
      padding: 10px 15px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      width: 100%;
    }
    button:hover {
      background-color: #0056b3;
    }
    .prediction-entry {
      background: rgba(0,0,0,0.7);
      padding: 10px;
      margin-top: 10px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }
    @media (max-width: 768px) {
      body {
        padding: 10px;
      }
    }
  </style>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCL9bYlJy3UD263Bg7i63nKg2hBdWYSS8U",
      authDomain: "summerslam2025-e0367.firebaseapp.com",
      projectId: "summerslam2025-e0367",
      storageBucket: "summerslam2025-e0367.firebasestorage.app",
      messagingSenderId: "415608766355",
      appId: "1:415608766355:web:1062f4141f0d9dc06fb266",
      measurementId: "G-JZGB1RH03E"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    window.submitForm = async function () {
      const prediction = {
        name: document.getElementById("username").value.trim(),
        roman_vs_gunther: document.getElementById("roman_vs_gunther").value,
        becky_vs_bianca: document.getElementById("becky_vs_bianca").value,
        logan_vs_randy: document.getElementById("logan_vs_randy").value,
        tag_match: document.getElementById("tag_match").value,
        ic_title: document.getElementById("ic_title").value,
        cody_heel_turn: document.getElementById("cody_heel_turn").value,
        timestamp: new Date()
      };

      if (!prediction.name) {
        alert("Please enter your name.");
        return;
      }

      try {
        await addDoc(collection(db, "predictions"), prediction);
        alert("Thank you for your picks, " + prediction.name + "!");
        document.getElementById("predictionForm").reset();
        loadPredictions();
      } catch (e) {
        console.error("Error adding document: ", e);
        alert("Failed to submit. Try again later.");
      }
    };

    async function loadPredictions() {
      const container = document.getElementById("predictionsList");
      container.innerHTML = "<h2>Submitted Predictions</h2>";

      const querySnapshot = await getDocs(collection(db, "predictions"));
      querySnapshot.forEach((doc) => {
        const data = doc.data();
        const div = document.createElement("div");
        div.className = "prediction-entry";
        div.innerHTML = `
          <strong>${data.name}</strong><br/>
          Roman Reigns vs. Gunther: ${data.roman_vs_gunther}<br/>
          Becky Lynch vs. Bianca Belair: ${data.becky_vs_bianca}<br/>
          Logan Paul vs. Randy Orton: ${data.logan_vs_randy}<br/>
          Tag Match: ${data.tag_match}<br/>
          Intercontinental Title: ${data.ic_title}<br/>
          Cody Heel Turn: ${data.cody_heel_turn}
        `;
        container.appendChild(div);
      });
    }

    window.addEventListener("DOMContentLoaded", loadPredictions);
  </script>
</head>
<body>
  <h1>SummerSlam 2025 Picks</h1>
  <form id="predictionForm">
    <label for="username">Enter Your Name:</label>
    <input type="text" id="username" required />

    <label for="roman_vs_gunther">Roman Reigns vs. Gunther:</label>
    <select id="roman_vs_gunther">
      <option>Roman Reigns</option>
      <option>Gunther</option>
    </select>

    <label for="becky_vs_bianca">Becky Lynch vs. Bianca Belair:</label>
    <select id="becky_vs_bianca">
      <option>Becky Lynch</option>
      <option>Bianca Belair</option>
    </select>

    <label for="logan_vs_randy">Logan Paul vs. Randy Orton:</label>
    <select id="logan_vs_randy">
      <option>Logan Paul</option>
      <option>Randy Orton</option>
    </select>

    <label for="tag_match">Sami Zayn & Kevin Owens vs. DIY:</label>
    <select id="tag_match">
      <option>Sami Zayn & Kevin Owens</option>
      <option>DIY (Ciampa & Gargano)</option>
    </select>

    <label for="ic_title">Intercontinental Title Match:</label>
    <select id="ic_title">
      <option>Bron Breakker</option>
      <option>Ricochet</option>
    </select>

    <label for="cody_heel_turn">Will Cody Rhodes turn heel tonight?</label>
    <select id="cody_heel_turn">
      <option>Yes</option>
      <option>No</option>
    </select>

    <button type="button" onclick="submitForm()">Submit Picks</button>
  </form>

  <div id="predictionsList"></div>
</body>
</html>
